<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Voiceflow Host Debug</title>
</head>
<body>

<h3>Voiceflow Host (Debug)</h3>

<!-- Voiceflow Web Widget -->
<script type="text/javascript">
    (function(d, t) {
      var v = d.createElement(t), s = d.getElementsByTagName(t)[0];
      v.onload = function() {
        window.voiceflow.chat.load({
          verify: { projectID: '698580c641335707881c48ac' },
          url: 'https://general-runtime.voiceflow.com',
          versionID: 'production',
          voice: {
            url: 'https://runtime-api.voiceflow.com'
          }
        });
      };
      v.src = "https://cdn.voiceflow.com/widget-next/bundle.mjs";
      v.type = "text/javascript";
      s.parentNode.insertBefore(v, s);
    })(document, 'script');
  </script>
  

<!-- ðŸ”‘ THIS IS THE MISSING BRIDGE -->
<script>
window.addEventListener("message", function (event) {
  if (!event.data || !event.data.type) return;

  console.log("HOST RECEIVED MESSAGE:", event.data);

  if (event.data.type === "booking_confirmed_string") {
    window.voiceflow.chat.interact({
      type: "complete",
      payload: event.data.data
    });
  }
});
</script>

</body>
</html>
