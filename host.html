<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Voiceflow Host Debug</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>

<h3>Voiceflow Host (Debug)</h3>

<!-- ========================= -->
<!-- Voiceflow Web Widget -->
<!-- ========================= -->
<script type="text/javascript">
  (function(d, t) {
    var v = d.createElement(t);
    var s = d.getElementsByTagName(t)[0];

    v.onload = function() {
      window.voiceflow.chat.load({
        verify: { projectID: "698580c641335707881c48ac" },
        url: "https://general-runtime.voiceflow.com",
        versionID: "production",
        voice: {
          url: "https://runtime-api.voiceflow.com"
        }
      });
    };

    v.src = "https://cdn.voiceflow.com/widget-next/bundle.mjs";
    v.type = "text/javascript";
    s.parentNode.insertBefore(v, s);
  })(document, "script");
</script>

<!-- ========================= -->
<!-- IFRAME ‚Üí VOICEFLOW BRIDGE -->
<!-- ========================= -->
<script>
window.addEventListener("message", function(event) {
  if (!event || !event.data) return;

  // üîí Optional safety check (can remove later)
  // if (event.origin !== "https://preynshww.github.io") return;

  if (event.data.type === "booking_confirmed_string") {
    console.log("HOST RECEIVED MESSAGE:", event.data);

    // 1Ô∏è‚É£ Display message in chat (THIS IS REQUIRED ON WEB)
    window.voiceflow.chat.interact({
      type: "text",
      payload: event.data.data
    });

    // 2Ô∏è‚É£ Tell Voiceflow input is complete ‚Üí move flow forward
    window.voiceflow.chat.interact({
      type: "complete"
    });
  }
});
</script>

</body>
</html>
